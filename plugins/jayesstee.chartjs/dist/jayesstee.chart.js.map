{"version":3,"sources":["../src/jayesstee.chart.js"],"names":["jst","Chart","JstChart","Object","constructor","optsAndData","initialOptsAndData","render","$div","cn","$canvas","ref","postRender","chartContext","chartCanvas","el","getContext","chart","update","updateOptions","opts","options","assign","refresh","setOptions","updateDataset","label","dataset","index","labels","indexOf","datasets","removeDataset","splice","addDataset","push"],"mappings":"AAAA,MAAOA,CAAAA,GAAP,KAAkB,WAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,UAAlB,CAEA,MAAO,MAAMC,CAAAA,QAAN,QAAuBF,CAAAA,GAAG,CAACG,MAAO,CAQvCC,WAAW,CAACC,WAAD,CAAc,CACvB,QACA,KAAKC,kBAAL,CAA0BD,WAC3B,CAEDE,MAAM,EAAG,CACP,MAAOP,CAAAA,GAAG,CAACQ,IAAJ,CAAS,CAACC,EAAE,CAAE,QAAL,CAAT,CACST,GAAG,CAACU,OAAJ,CAAY,CAACC,GAAG,CAAE,aAAN,CAAZ,CADT,CAGR,CAEDC,UAAU,EAAG,CACX,GAAIC,CAAAA,YAAY,CAAG,KAAKC,WAAL,CAAiBC,EAAjB,CAAoBC,UAApB,CAA+B,IAA/B,CAAnB,CACA,GAAI,KAAKC,KAAT,CAAgB,CACd,KAAKA,KAAL,CAAWC,MAAX,EACD,CAFD,IAGK,CACH,KAAKD,KAAL,CAAa,GAAIhB,CAAAA,KAAJ,CAAUY,YAAV,CACU,KAAKP,kBADf,CAAb,CAEA,MAAO,MAAKA,kBACb,CACF,CAGDa,aAAa,CAACC,IAAD,CAAO,CAClB,KAAKH,KAAL,CAAWI,OAAX,CAAqBlB,MAAM,CAACmB,MAAP,CAAc,KAAKL,KAAL,CAAWI,OAAzB,CAAkCD,IAAlC,CAArB,CACA,KAAKG,OAAL,EACD,CAGDC,UAAU,CAACJ,IAAD,CAAO,CACf,KAAKH,KAAL,CAAWI,OAAX,CAAqBD,IAArB,CACA,KAAKG,OAAL,EACD,CAKDE,aAAa,CAACC,KAAD,CAAQC,OAAR,CAAiB,CAC5B,GAAIC,CAAAA,KAAK,CAAG,KAAKX,KAAL,CAAWY,MAAX,CAAkBC,OAAlB,CAA0BJ,KAA1B,CAAZ,CACA,GAAIE,KAAK,EAAI,CAAb,CAAgB,CACd,KAAKX,KAAL,CAAWc,QAAX,CAAoBH,KAApB,EAA6BD,OAA7B,CACA,KAAKJ,OAAL,EACD,CACF,CAKDS,aAAa,CAACN,KAAD,CAAQ,CACnB,GAAIE,CAAAA,KAAK,CAAG,KAAKX,KAAL,CAAWY,MAAX,CAAkBC,OAAlB,CAA0BJ,KAA1B,CAAZ,CACA,GAAIE,KAAK,EAAI,CAAb,CAAgB,CACd,KAAKX,KAAL,CAAWc,QAAX,CAAoBE,MAApB,CAA2BL,KAA3B,CAAkC,CAAlC,EACA,KAAKX,KAAL,CAAWY,MAAX,CAAkBI,MAAlB,CAAyBL,KAAzB,CAAgC,CAAhC,EACA,KAAKL,OAAL,EACD,CACF,CAKDW,UAAU,CAACR,KAAD,CAAQC,OAAR,CAAiB,CACzB,KAAKV,KAAL,CAAWc,QAAX,CAAoBI,IAApB,CAAyBR,OAAzB,EACA,KAAKV,KAAL,CAAWS,KAAX,CAAiBS,IAAjB,CAAsBT,KAAtB,CACD,CAxEsC","sourcesContent":["import jst   from \"jayesstee\";\nimport Chart from \"chart.js\";\n\nexport class JstChart extends jst.Object {\n  // The options for the this class are the same as\n  // those that would be specified for chartjs (www.chartjs.org):\n  // {\n  //   type:     <type of chart>,\n  //   data:     { datasets and labels },\n  //   options:  { options from chartjs }\n  // }\n  constructor(optsAndData) {\n    super();\n    this.initialOptsAndData = optsAndData;\n  }\n\n  render() {\n    return jst.$div({cn: \"-chart\"},\n                    jst.$canvas({ref: \"chartCanvas\"})\n                   );\n  }\n\n  postRender() {\n    let chartContext = this.chartCanvas.el.getContext('2d');\n    if (this.chart) {\n      this.chart.update();\n    }\n    else {\n      this.chart = new Chart(chartContext,\n                             this.initialOptsAndData);\n      delete(this.initialOptsAndData);\n    }\n  }\n\n  // Merge in the chart's options\n  updateOptions(opts) {\n    this.chart.options = Object.assign(this.chart.options, opts);\n    this.refresh();\n  }\n\n  // Just set the chart's options\n  setOptions(opts) {\n    this.chart.options = opts;\n    this.refresh();\n  }\n\n  // Update a single dataset\n  // TODO - needs a rethink - there isn't a 1-to-1 mapping\n  // between labels and datasets\n  updateDataset(label, dataset) {\n    let index = this.chart.labels.indexOf(label);\n    if (index >= 0) {\n      this.chart.datasets[index] = dataset;\n      this.refresh();\n    }\n  }\n\n  // Remove the named dataset\n  // TODO - needs a rethink - there isn't a 1-to-1 mapping\n  // between labels and datasets\n  removeDataset(label) {\n    let index = this.chart.labels.indexOf(label);\n    if (index >= 0) {\n      this.chart.datasets.splice(index, 1);\n      this.chart.labels.splice(index, 1);\n      this.refresh();\n    }\n  }\n\n  // Add a new dataset\n  // TODO - needs a rethink - there isn't a 1-to-1 mapping\n  // between labels and datasets\n  addDataset(label, dataset) {\n    this.chart.datasets.push(dataset);\n    this.chart.label.push(label);\n  }\n  \n}\n"],"file":"jayesstee.chart.js"}